(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(58)},56:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),s=a.n(i),l=a(62),o=a(2),c=a(3),u=a(5),m=a(4),p=a(6),h=a(63),d=a(19),g=a(59),f=a(61),v=a(14),b=a.n(v),E=new(function(){function e(){Object(o.a)(this,e),this.auth=b.a.create({baseURL:"https://paranoiaapp.herokuapp.com",withCredentials:!0})}return Object(c.a)(e,[{key:"signup",value:function(e){var t=e.username,a=e.password,n=e.email;return this.auth.post("/auth/signup",{username:t,password:a,email:n}).then(function(e){return e.data})}},{key:"login",value:function(e){var t=e.username,a=e.password;return this.auth.post("/auth/login",{username:t,password:a}).then(function(e){return e.data})}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then(function(e){return e.data})}},{key:"me",value:function(){return this.auth.get("/auth/me").then(function(e){return e.data})}}]),e}()),O=r.a.createContext(),j=O.Provider,y=O.Consumer,k=function(e){return function(t){return r.a.createElement(y,null,function(a){return r.a.createElement(e,Object.assign({},a,t))})}},S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLogged:!1,user:null,isLoading:!0},a.handleSetUser=function(e){a.setState({user:e,isLogged:!0})},a.handleLogOut=function(){E.logout().then(function(){a.setState({user:null,isLogged:!1})}).catch(function(e){console.log("Hay que manejar errores")})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.me().then(function(t){e.setState({user:t,isLoading:!1,isLogged:!0})}).catch(function(t){e.setState({isLogged:!1,user:null,isLoading:!1})})}},{key:"render",value:function(){return this.state.isLoading?r.a.createElement("h1",null,"Loading..."):r.a.createElement(j,{value:{isLogged:this.state.isLogged,user:this.state.user,logout:this.handleLogOut,setUser:this.handleSetUser}},this.props.children)}}]),t}(n.Component),N=k(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.path,a=e.component,n=e.isLogged,i=Object(d.a)(e,["path","component","isLogged"]);return r.a.createElement(g.a,Object.assign({},i,{path:t,render:function(e){return n?r.a.createElement(a,e):r.a.createElement(f.a,{to:"/"})}}))}}]),t}(n.Component)),L=k(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.path,a=e.component,n=e.isLogged,i=Object(d.a)(e,["path","component","isLogged"]);return r.a.createElement(g.a,Object.assign({},i,{path:t,render:function(e){return n?r.a.createElement(f.a,{to:"/profile"}):r.a.createElement(a,e)}}))}}]),t}(n.Component)),w=k(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h4",null,"404 Error",r.a.createElement("br",null),"Sorry, page not found... Try again!"))}}]),t}(n.Component)),C=a(12),I=a(64),G=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",alert:"",email:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password,i=t.email;E.signup({username:n,password:r,email:i}).then(function(e){a.setState({username:"",password:"",email:""}),a.props.setUser(e),a.props.history.push("/profile")}).catch(function(e){switch(e.response.data.error){case"empty":a.setState({alert:"username or password can\xb4t be empty"});break;case"username-not-unique":a.setState({alert:"username already in use"});break;default:a.setState({alert:""})}})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.handleLogin=function(){a.props.handleLogin()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.alert,i=e.email;return r.a.createElement("div",{className:"signup log-sign-container"},n?r.a.createElement("p",{className:"warning"},n):null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"log-sign-label"},"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange})),r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"log-sign-label"},"Email:"),r.a.createElement("input",{type:"text",name:"email",value:i,onChange:this.handleChange})),r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"log-sign-label"},"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange})),r.a.createElement("div",{className:"input-submit"},r.a.createElement("input",{className:"log-signup-btn btn",type:"submit",value:"SignUp"}))),r.a.createElement("p",{className:"log-sign"},"Already have an account? ",r.a.createElement("span",{className:"toggle-sign-log",onClick:this.handleLogin},"Login")))}}]),t}(n.Component),U=k(Object(I.a)(G)),D=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",alert:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;E.login({username:n,password:r}).then(function(e){a.props.setUser(e),a.props.history.push("/profile")}).catch(function(e){switch(e.response.data.error){case"User or password invalid":case"not-found":a.setState({alert:"invalid username or password"});break;case"validation":a.setState({alert:"username or password can\xb4t be empty"});break;default:a.setState({alert:""})}})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.handleSignup=function(){a.props.handleSignup()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.alert;return r.a.createElement("div",{className:"login log-sign-container"},n?r.a.createElement("p",{className:"warning"},n):null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"log-sign-label"},"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange})),r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"log-sign-label"},"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange})),r.a.createElement("div",{className:"input-submit"},r.a.createElement("input",{className:"log-signup-btn btn",type:"submit",value:"Login"})),r.a.createElement("p",{className:"log-sign"},"Don't you have an acount? ",r.a.createElement("span",{className:"toggle-sign-log",onClick:this.handleSignup},"SignUp"))))}}]),t}(n.Component),x=k(Object(I.a)(D)),A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showSignup:!0},a.handleLogin=function(){a.setState({showSignup:!a.state.showSignup})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.showSignup;return r.a.createElement("div",{className:"home-page"},r.a.createElement("img",{className:"logo",src:"/img/paranoia.png",alt:"paranoia logo"}),r.a.createElement("h3",{className:"slogan"},"Frase descriptiva"),e?r.a.createElement(U,{handleLogin:this.handleLogin}):r.a.createElement(x,{handleSignup:this.handleLogin}))}}]),t}(n.Component),M=new(function(){function e(){Object(o.a)(this,e),this.user=b.a.create({baseURL:"https://paranoiaapp.herokuapp.com",withCredentials:!0})}return Object(c.a)(e,[{key:"getUser",value:function(e){return this.user.get("/user").then(function(e){return e.data})}},{key:"editProfile",value:function(e,t,a){return this.user.patch("/user/".concat(t,"/edit"),{userInfo:e,image:a}).then(function(e){return e.data})}},{key:"editPicture",value:function(e,t){return this.user.patch("/user/".concat(t,"/picture"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data})}}]),e}()),q=a(60),F=k(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={startedStatus:null,gameFinished:null},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderGameRoomDetail",value:function(){var e=this.props.game;return e.gameFinished?r.a.createElement(q.a,{className:"decoration-none",to:"/game/".concat(e._id,"/over")},r.a.createElement("div",{className:"game-list"},r.a.createElement("p",{className:"game-room"},e.roomName),r.a.createElement("p",{className:"finished"},"finished"))):e.startedStatus?r.a.createElement(q.a,{className:"decoration-none",to:"/game/".concat(e._id)},r.a.createElement("div",{className:"game-list"},r.a.createElement("p",{className:"game-room"},e.roomName),r.a.createElement("p",{className:"active"},"active"))):r.a.createElement("div",{className:"game-list"},r.a.createElement("p",{className:"game-room"},e.roomName),r.a.createElement("p",{className:"pending"},"pending"))}},{key:"render",value:function(){var e=this.props,t=e.game,a=e.admin;return r.a.createElement("div",{className:"my-games"},a?r.a.createElement(q.a,{className:"decoration-none",to:"/game/".concat(t._id,"/create")},r.a.createElement("p",{className:"game-list admin"},t.roomName)):this.renderGameRoomDetail())}}]),t}(n.Component)),_=k(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleButton=function(){a.props.handleButton(a.props.state,a.props)},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{className:"btn",onClick:this.handleButton},this.props.children)}}]),t}(n.Component)),B=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={changeQuote:!1,changeImage:!1,quote:a.props.quote,image:""},a.handleEdit=function(e){a.setState({quote:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.props.profileInfo,n={quote:a.state.quote};M.editProfile(n,t).then(function(e){a.props.handleSubmit(e.quote)})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.quote;return r.a.createElement("form",{className:"quote-form",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"input is-success",autofocus:"true",placeholder:e,type:"text",name:"Kill Sentence",value:e,onChange:this.handleEdit}),r.a.createElement("input",{className:"icon",type:"image",src:"img/ok.png",alt:"icon submit"}))}}]),t}(n.Component),K=k(Object(I.a)(B)),P=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={image:""},a.fileUpload=function(e){var t=e.target.files[0];a.setState({image:t})},a.handleSubmit=function(e){e.preventDefault();var t=new FormData,n=a.state.image;t.append("picture",n),M.editPicture(t,a.props.user._id).then(function(e){a.props.setUser(e),a.setState({image:e.image}),a.props.handleSubmit(n)})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"file",name:"image",onChange:this.fileUpload}),r.a.createElement("input",{className:"edit-btn",type:"submit",value:"Edit"}))}}]),t}(n.Component),R=k(Object(I.a)(P)),T=k(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.user,t=e.username,a=e.image;return r.a.createElement("div",{className:"nav-bar"},r.a.createElement(q.a,{className:"decoration-none",to:"/profile"},r.a.createElement("div",{className:"nav-container"},r.a.createElement("div",null,r.a.createElement("img",{className:"nav-img",src:a,alt:"user icon"})),r.a.createElement("p",{className:"hello-user"},"Hello ",t,"!"))),r.a.createElement("p",{className:"logout",onClick:this.props.logout},"Logout"))}}]),t}(n.Component)),J=a(28),Y=function(){return r.a.createElement(J.a,{trigger:r.a.createElement("img",{className:"info-icon",src:"img/info.png",alt:"info icon"}),position:"left top"},function(e){return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"content"},"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae magni omnis delectus nemo, maxime molestiae dolorem numquam mollitia, voluptate ea, accusamus excepturi deleniti ratione sapiente! Laudantium, aperiam doloribus. Odit, aut."))})},H=k(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:"",games:[],isLoading:!0,quote:"",file:"",showEditForm:!1,id:"",showEditImage:!1,prueba:!1},a.joinGameLink=function(){a.props.history.push("/game/join")},a.createNewGameLink=function(){a.props.history.push("/game/create")},a.handleSubmit=function(e){a.setState({quote:e}),a.toggleEditForm(),a.update()},a.toggleEditForm=function(){var e=a.state.showEditForm;a.setState({showEditForm:!e})},a.toggleEditImage=function(){var e=a.state.showEditImage;a.setState({showEditImage:!e})},a.submitImage=function(e){a.setState({file:e}),a.toggleEditImage(),a.update()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({isLoading:!0}),this.update()}},{key:"update",value:function(){var e=this,t=this.props.user._id;M.getUser(t).then(function(t){e.setState({user:t.user.username,image:t.user.image,games:t.games,isLoading:!1,quote:t.user.quote,id:t.user._id})}).catch(function(e){console.log(e)})}},{key:"renderGames",value:function(){return this.state.games.map(function(e){return r.a.createElement(F,{key:e._id,game:e,admin:!1})})}},{key:"renderAdminGames",value:function(){var e=this.state,t=e.games,a=e.id;return t.filter(function(e){return!e.startedStatus&&e.admin===a}).map(function(e){return r.a.createElement(F,{key:e.roomName,game:e,admin:!0})})}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.quote,n=e.showEditForm,i=e.isLoading,s=e.image,l=e.showEditImage;return r.a.createElement("div",{className:"profile"},i?r.a.createElement("h1",null,"Loading... "):r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement(Y,null),r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{className:"profile-img",src:s,alt:"User",onClick:this.toggleEditImage}),l?r.a.createElement(R,{handleSubmit:this.submitImage,imageinfo:s}):null),r.a.createElement("div",{className:"quote"},n?r.a.createElement(K,{profileInfo:t,quote:a,handleSubmit:this.handleSubmit}):r.a.createElement("div",null," ",a?r.a.createElement("h3",null,a):r.a.createElement("h3",null,"'Kill sentence'")," "),n?null:r.a.createElement("div",null,r.a.createElement("img",{className:"icon",src:"img/Edit-icon.png",alt:"edit quote",onClick:this.toggleEditForm})))),r.a.createElement("div",{className:"profile-btns"},r.a.createElement(_,{handleButton:this.createNewGameLink},"New Game"),r.a.createElement(_,{handleButton:this.joinGameLink},"Join Game")),r.a.createElement("div",{className:"info-container"},r.a.createElement("div",{className:"games"},r.a.createElement("h5",null,"My Games:"),this.renderGames()),r.a.createElement("div",{className:"games"},r.a.createElement("h5",null,"Admin Games:"),this.renderAdminGames()))))}}]),t}(n.Component)),Q=new(function(){function e(){Object(o.a)(this,e),this.auth=b.a.create({baseURL:"https://paranoiaapp.herokuapp.com",withCredentials:!0})}return Object(c.a)(e,[{key:"createGame",value:function(e,t,a,n){return this.auth.post("/game/",{roomName:e,mission:t,email:a,message:n}).then(function(e){return e.data})}},{key:"getGameInfo",value:function(e){return this.auth.get("/game/".concat(e)).then(function(e){return e.data})}},{key:"joinGame",value:function(e,t){return this.auth.post("/game/join",{roomName:e,mission:t}).then(function(e){return e.data})}},{key:"startGame",value:function(e){return this.auth.get("/game/".concat(e,"/start")).then(function(e){return e.data})}},{key:"killUser",value:function(e,t){return this.auth.post("/game/".concat(e,"/kill"),{userName:t}).then(function(e){return e.data})}},{key:"reSortGame",value:function(e){return this.auth.get("/game/".concat(e,"/sort")).then(function(e){return e.data})}}]),e}()),z=k(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={killedByUser:[],crossedClass:"",isLoading:!1},a.componentDidMount=function(){a.setState({isLoading:!0}),a.killedByUser(a.scrachParticipant),a.setState({isLoading:!1})},a.killedByUser=function(e){var t=a.props,n=t.participants,r=t.participant,i=a.props.state,s=i.killLog,l=i.username,o=n.filter(function(e){return s.find(function(t){return t.killer===l&&t.target===e.username})});o&&a.setState({killedByUser:o},function(){e(r)})},a.scrachParticipant=function(e){a.state.killedByUser.find(function(t){return t.username===e.username})&&a.setState({crossedClass:"crossed"})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.participant,t=this.state,a=t.crossedClass,n=t.isLoading;return r.a.createElement("li",{key:e.username},n?r.a.createElement("h3",null,"...Loading"):r.a.createElement("span",{className:a}," ",e.username," "))}}]),t}(n.Component)),V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",userMission:{},isLoading:!0,numberOfSurvivors:null,admin:"",gameId:"",alert:""},a.componentDidMount=function(){var e=a.props.state,t=e.username,n=e.gameId,r=e.numberOfSurvivors,i=e.admin;a.setState({username:t,userMission:a.props.userMission,isLoading:!1,gameId:n,numberOfSurvivors:r,alert:"",admin:i})},a.handleKill=function(e,t){a.setState({isLoading:!0});var n=a.state.gameId;Q.killUser(n).then(function(e){if(e.numberOfSurvivors<=1)a.props.history.push("/game/".concat(n,"/over"));else{var t=e.participants.find(function(e){return e.username===a.state.username})._id,r=e.missions.find(function(e){return e.killer===t});if(r){var i=e.participants.find(function(e){return e._id===r.target});r.target=i.username}else r={target:"no more players",mission:"no more missions"};a.setState({userMission:r,isLoading:!1,numberOfSurvivors:e.numberOfSurvivors,alert:"Congratulations, you killed your target!"})}}).catch()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.userMission,n=e.numberOfSurvivors,i=e.alert;return r.a.createElement("div",null," ",t?r.a.createElement("h1",null,"...Loading"):r.a.createElement("div",null,r.a.createElement("h3",null,"Number of Survivors: ",n),r.a.createElement("p",null,"Your Target: ",a.target),r.a.createElement("p",null,"Mission: ",a.mission),r.a.createElement(_,{handleButton:this.handleKill,state:this.state,props:this.props},"Kill"),i?r.a.createElement("p",{className:"ok-alert"},i):null))}}]),t}(n.Component),W=k(Object(I.a)(V)),X=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",admin:"",roomName:"",participants:[],missions:[],endingDate:"",numberOfSurvivors:null,killLog:[],startedStatus:!1,userStatus:null,isLoading:!0,gameId:""},a.populateMissions=function(e){return e.missions.map(function(t){for(var a=0;a<e.participants.length;a++)t.killer===e.participants[a]._id&&(t.killer=e.participants[a].username);for(var n=0;n<e.participants.length;n++)t.target===e.participants[n]._id&&(t.target=e.participants[n].username);return t})},a.populateKillLog=function(e){return e.killLog.map(function(t){for(var a=0;a<e.participants.length;a++)t.killer===e.participants[a]._id&&(t.killer=e.participants[a].username);for(var n=0;n<e.participants.length;n++)t.target===e.participants[n]._id&&(t.target=e.participants[n].username);return t})},a.handleReSort=function(e,t){a.setState({isLoading:!0});var n=a.state.gameId;Q.reSortGame(n).then(function(e){e.missions=a.populateMissions(e),console.log(e.missions),a.setState({isLoading:!1,missions:e.missions})}).catch()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0});var t=this.props.match.params.id;Q.getGameInfo(t).then(function(a){a.missions=e.populateMissions(a),a.killLog=e.populateKillLog(a);var n=e.props.user.username,r=a.killLog.find(function(e){return e.target===n}),i=r?"dead":"alive";e.setState({username:n,admin:a.admin.username,roomName:a.roomName,participants:a.participants,missions:a.missions,numberOfSurvivors:a.numberOfSurvivors,killLog:a.killLog,isLoading:!1,gameId:t,userStatus:i,userDead:r})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.admin,i=t.roomName,s=t.participants,l=t.missions,o=t.isLoading,c=t.userStatus,u=t.userDead,m=l.find(function(e){return e.killer===a}),p=n===a;return r.a.createElement("div",null,o?r.a.createElement("h1",null,"...isLoading"):r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement("h1",null,"Game: ",i),r.a.createElement("h3",null,"Admin: ",n),r.a.createElement("h3",null,"User: ",a),"alive"===c?r.a.createElement(W,{userMission:m,state:this.state}):r.a.createElement("h3",null,"You have been killed by: ",u.killer," for: ",u.mission),r.a.createElement("ul",null,s.map(function(t){return r.a.createElement(z,{key:t.username,participant:t,participants:s,state:e.state})})),p?r.a.createElement(_,{handleButton:this.handleReSort,state:this.state,props:this.props}," Re-Sort Game "):null))}}]),t}(n.Component),Z=k(Object(I.a)(X)),$=k(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.participants;return r.a.createElement("ul",null,e.map(function(e){return r.a.createElement("li",{key:e.username},r.a.createElement("span",null," ",e.username," "))}))}}]),t}(n.Component)),ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={admin:"",roomName:"",participants:[],gameId:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;Q.getGameInfo(t).then(function(a){e.setState({admin:a.admin.username,roomName:a.roomName,participants:a.participants,gameId:t})})}},{key:"handleStartClick",value:function(e,t){var a=this,n=this.state.gameId;Q.startGame(n).then(function(e){var t=e._id;a.props.history.push("/game/".concat(t))})}},{key:"render",value:function(){var e=this.state,t=e.admin,a=e.roomName,n=e.participants;return r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement("h1",null,"Room Name: ",a," "),r.a.createElement("h3",null,"Admin: ",t," "),r.a.createElement("h3",null," Participants:",n?r.a.createElement($,{participants:n}):null,r.a.createElement(_,{handleButton:this.handleStartClick,state:this.state,props:this.props},"Start Game")))}}]),t}(n.Component),te=k(Object(I.a)(ee)),ae=k(function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={roomName:"",mission:""},a.handleEdit=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.roomName,r=t.mission;Q.joinGame(n,r).then(function(){a.props.history.push("/profile",a.state.alert)})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement("h2",null,"Join a Game"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Introduce the name of the room:"),r.a.createElement("input",{className:"input is-success",placeholder:"Room's name",type:"text",name:"roomName",onChange:this.handleEdit}),r.a.createElement("div",null,r.a.createElement("label",null,"To enter your mission, remember:",r.a.createElement("br",null),"\xb7 It must be something simple, but fun (sing 'La Macarena' or try to touch the nose with his tongue)",r.a.createElement("br",null),"\xb7 The mission should not be directed to anyone in particular")),r.a.createElement("input",{className:"input is-success",placeholder:"Your Mission",type:"text",name:"mission",onChange:this.handleEdit}),r.a.createElement("input",{className:"btn is-success",type:"submit",value:"Go!"})))}}]),t}(n.Component)),ne=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={value:""},a.handleChangeInput=function(e){a.setState({value:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.value;a.props.onSubmit(t),a.setState({value:""})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.value;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",value:e,onChange:this.handleChangeInput}),r.a.createElement("input",{type:"submit",value:"add email"}))}}]),t}(n.Component),re=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.emails,a=e.index,n=e.onDelete;return r.a.createElement("li",null,t,r.a.createElement("button",{onClick:function(){n(a)}},"delete"))}}]),t}(n.Component),ie=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={roomName:"",mission:"",emails:[]},a.handleEdit=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t,n=document.getElementById("message").value,r=a.state,i=r.roomName,s=r.mission,l=r.emails;t=typeof l===Array?l.join(", "):l,console.log(t),Q.createGame(i,s,t,n).then(function(e){var t=e._id;a.props.history.push("/game/".concat(t,"/create"))})},a.handleSubmitEmail=function(e){var t=a.state.emails;t.push("".concat(e)),a.setState({emails:t}),console.log(t)},a.handleDeleteEmail=function(e){var t=a.state.emails;t.splice(e,1),a.setState({emails:t})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.roomName,n=t.mission,i=t.emails;return r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement("h4",null,"Create game:"),r.a.createElement("h4",null,"Invite players:"),r.a.createElement(ne,{onSubmit:this.handleSubmitEmail}),r.a.createElement("div",null," ",i?r.a.createElement("ul",null,i.map(function(t,a){return r.a.createElement(re,{emails:t,key:a,index:a,onDelete:e.handleDeleteEmail})})):null),r.a.createElement("form",{className:"create-game-form",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"input is-success",placeholder:"game name",type:"text",name:"roomName",value:a,onChange:this.handleEdit}),r.a.createElement("input",{className:"input is-success",placeholder:"Introduce a mission",type:"text",name:"mission",value:n,onChange:this.handleEdit}),r.a.createElement("div",{className:"mail-form"},r.a.createElement("label",{htmlFor:"message"},"Message"),r.a.createElement("textarea",{className:"form-message",rows:"5",id:"message"})),r.a.createElement("h4",{className:"header invite"},"Invite players:"),r.a.createElement("div",{className:"form-input"},r.a.createElement("label",{className:"label",htmlFor:"email-adress"},"Email addresses"),r.a.createElement("input",{className:"form-message form-control",type:"text",name:"email-adress",id:"email",placeholder:"email-1@email.com, email-2@email.com..."})),r.a.createElement("div",{className:"form-input"},r.a.createElement("label",{className:"label",htmlFor:"message"},"Message"),r.a.createElement("textarea",{className:"form-message text-area",rows:"5",id:"message",placeholder:"remember include the name of the game"})),r.a.createElement("input",{className:"btn send-create",type:"submit",value:"Invite and create"})))}}]),t}(n.Component),se=k(Object(I.a)(ie)),le=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",missions:{},winner:"",isLoading:!0,roomName:"",killLog:[]},a.componentDidMount=function(){a.setState({isLoading:!0});var e=a.props.match.params.id;Q.getGameInfo(e).then(function(t){t.missions=a.populateMissions(t),t.killLog=a.populateKillLog(t),a.setState({username:a.props.user.username,admin:t.admin.username,roomName:t.roomName,participants:t.participants,missions:t.missions,killLog:t.killLog,isLoading:!1,winner:t.missions[0].killer,gameId:e})})},a.populateKillLog=function(e){return e.killLog.map(function(t){for(var a=0;a<e.participants.length;a++)t.killer===e.participants[a]._id&&(t.killer=e.participants[a].username);for(var n=0;n<e.participants.length;n++)t.target===e.participants[n]._id&&(t.target=e.participants[n].username);return t})},a.populateMissions=function(e){return e.missions.map(function(t){for(var a=0;a<e.participants.length;a++)t.killer===e.participants[a]._id&&(t.killer=e.participants[a].username);for(var n=0;n<e.participants.length;n++)t.target===e.participants[n]._id&&(t.target=e.participants[n].username);return t})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.winner,a=e.isLoading,n=e.killLog;return r.a.createElement("div",null,a?r.a.createElement("h1",null,"...Loading"):r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement("h1",null,"winner: ",t," "),r.a.createElement("p",null,"Kill Log"),r.a.createElement("div",null," ",n.map(function(e){return r.a.createElement("div",{key:e.mission},r.a.createElement("p",null,"Killer: ",e.killer),r.a.createElement("p",null,"Target: ",e.target),r.a.createElement("p",null,"Mission: ",e.mission),r.a.createElement("p",null,"Date of death: ",e.date))})," ")))}}]),t}(n.Component),oe=k(Object(I.a)(le)),ce=(a(56),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:"",games:[],isLoading:!0,showCreateForm:!1,quote:"",image:"",showEditForm:!1,id:"",showEditImage:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(S,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(L,{exact:!0,path:"/",component:A}),r.a.createElement(N,{exact:!0,path:"/profile",component:H}),r.a.createElement(N,{exact:!0,path:"/game/join",component:ae}),r.a.createElement(N,{exact:!0,path:"/game/create",component:se}),r.a.createElement(N,{path:"/game/:id/create",component:te}),r.a.createElement(N,{exact:!0,path:"/game/:id",component:Z}),r.a.createElement(N,{exact:!0,path:"/game/:id/over",component:oe}),r.a.createElement(N,{path:"/*",component:w})))))}}]),t}(n.Component));s.a.render(r.a.createElement(l.a,null,r.a.createElement(ce,null)),document.getElementById("root"))}},[[29,2,1]]]);
//# sourceMappingURL=main.ad465ae3.chunk.js.map